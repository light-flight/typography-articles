# Подробное изучение Typi

Typi это бибидлиотека, которая создана мной для упрощения работы с отзывчивой типографикой. Впервые я рассказал о ней в своей статье об [отзывчивой типографике](ссссылка) в январе 2016. С тех пор я добавил новый функционал, чтобы сделать библиотеку еще полезнее.

В этой статье я расскажу вам,что может делать Typi и как ее использовать.

Давайте начнем с установки Typi.

## Установка Typi

Для работы [Typi](https://github.com/zellwk/typi "A sass mixin to make responsive typography easy") требуется установить Sass для вашего проекта. Если вы точно не знаете, как это сделать, то я бы порекомендовал [вот эту статью](ссссылка), где я рассказываю как установить LibSass и Susy (тоже Sass библиотека, как и Typi).

(Здесь вы можете найти [официальную инструкцию](http://sass-scss.ru/install/ "Установка Sass") к установке Sass &#8212; *прим. пер.*).

Вот три способа, с помощью которых вы сможете установить Typi:

### Установка с Bower

* Терминал: `bower install typi --save`
* SCSS `@import path-to-typi/scss/typi`

### Установка с NPM

* Терминал: `npm install typi --save`
* SCSS `@import path-to-typi/scss/typi`

### Установка с Vanilla Sass

* [Загрузите последний релиз](https://github.com/zellwk/typi/releases)
* Распакуйте его в свой проект
* SCSS `@import path-to-typi/scss/typi`

После того, как вы завершите установку, переходите к следующему шагу.

## Настройка

Вам нужно установить две Sass мапы, чтобы использовать Typi. **Первая мапа будет с опорными точками - `$breakpoints`.** Это всего лишь набор пар `ключ: значение`, который сообщает Typi какие медиа-запросы нужно будет создавать. Это выглядит так:

```scss
$breakpoints: (
  small: 600px,
  large: 1200px
);
```

Это означает, что впоследствии, когда мы будем использовать ключевое слово `small`, то Typi создаст медиа-запрос со знаением `600px`.

*Вторая необходимая мапа будет называться `$typi`.* Она определяет какие `font-size` и `line-height` нужно использовать для соответствующего значения опорной точки (для соответствующего медиа-запроса). Это выглядит так:

```scss
$typi: (
  null: (16px, 1.4),
  small: 18px,
  large: 20px
);
```

С настройкой все, теперь давайте поговорим об использовании библиотеки и узнаем, какую именно роль играют значения в мапе `$typi`.

## Использование Typi

**В первую очередь Typi создает значения `font-size` и `line-height` для текста в теле документа.** Чтобы сделать это, нужно прописать `typi-base` миксин в `html` селекторе.

```scss
html {
  @include typi-base();
}
```

Когда вы вызываете `typi-base` миксин Typi определяет значения `font-size` и `line-height` на основе значений из `$typi` мапы.

Вы можете поменять мапу на другую, изменив настройку `$typi` в миксине `typi-base`. Я настоятельно не рекомндую делать это, потому что другие миксины и функции также используют `$typi` мапу.

```scss
html {
  @include typi-base($typi: $some-other-map);
}
```

Как только Typi находит `$typi` мапу, она сохдает **`min-width` медиа-запрос для каждого значения**, которое находит. Единственное исключение это ключ `null`, который **говорит Typi прописывать свойства, не создавая медиа-запросов**.

В нашем примере мы использовали 3 ключа: `null`, `small` и `large`:

```scss
$typi: (
  null: (16px, 1.4),
  small: 18px,
  large: 20px
);
```

Так как тут присутствует ключ `null`, то в первую очередь Typi пропишет свойства без медиа-запросов.

Потом Typi смотрит в мапу `$breakpoints`, чтобы определить значения ширины окна браузера, на которых необходимо создать `min-width` медиа-запросы. Таким образом мы получаем типичный [mibile-first](http://zellwk.com/blog/how-to-write-mobile-first-css/) СSS подход.

Вы так же можете изменить название `$breakpoints` мапы, но необходимо будет указать это в `typi-base` миксине. Как я упомянул выше, не рекомендуется это делать, потому что, например миксин `typi` (о нем речь пойдет дальше) также использует мапу `$breakpoints`.

```scss
html {
  @include typi-base($breakpoints: $some-other-map);
}
```

Исходя из наших значений опорных точек в мапе `breakpoints`, Typi создаст следующий CSS код:

```scss
html { /* свойства здесь */ }

@media all and (min-width: 600px) {
  html { /* свойства здесь */ }
}

@media all and (min-width: 1200px) {
  html { /* свойства здесь */ }
}
```

Для каждого ключевого слова (у нас это `small` и `large`) Typi будет смотерть мапу `$typi`. **Первое значение в каждом ключе будет использовано для задания свойства `font-size`. Если Typi находит второе значение в ключе, то его интерпретирует как значение для `line-height`.**

К примеру, в нашей мапе в ключе `null` прописано первое значение `16px` и второе `1.4`. В этом случает Typi пропишет свойства `font-size: 16px;` и `line-height: 1.4;` без каких-либо медиа-запросов.

То же самое проделывается и с остальными ключами. Следовательно на выходе будет произваодить эквивалентный CSS:

```scss
html {
  font-size: 16px;
  line-height: 1.4;
}

@media all and (min-width: 600px) {
  html {
    font-size: 18px;
  }
}

@media all and (min-width: 1200px) {
  html {
    font-size: 20px;
  }
}
```

На практике Typi немного улучшает код. **Она конвертирует `font-size` из пикселей в проценты**, чтобы быть уверенным, что ваша типографика правильно масштабируется с учетом настроек браузера и пользовательской поправки размера шрифта (это лучшая практика).

Так как большинство браузеров используют `16px` по умолчанию, Typi приравнивает `16px` к `100%`.

**Фактический CSS при использовании `tipy-base()` будет таким:

```scss
html {
  font-size: 100%;
  line-height: 1.4;
}

@media all and (min-width: 600px) {
  html {
    font-size: 112.5%;
  }
}

@media all and (min-width: 1200px) {
  html {
    font-size: 125%;
  }
}
```

*Заметка: Typi создает медиа-запросы в пикелях по умолчанию. Вы можете использовать mappy-breakpoint или breakpoint-sass, чтобы перевести единицы в em. Об этом в [следующей статье](ссссылка).

Вот мы познакомились с основами использования Typi.

## Использование Typi для остальных элементов

После того как мы задали значения для `font-size` и `line-height` для текста тела документа, мы можем использовать Typi и для других типографических элементов (например, h1-h6) с таким же успехом.

Чтобы сделать это, нам понадобится создать новую мапу для каждого типографическог элемента.

Давайте представим, что нам нужен `<h1>` с размером шрифта `2em` и высотой строки `1.2` без медиа запросов. Начиная с ширины окна в `600px` изменим размер шрифта и высоту строки до значений `3em` и `1.3` соответственно. CSS код, который мы хотим получить выглядит так:

```scss
h1 {
  font-size: 2em;
  line-height: 1.2;
}

@media (min-width: 600px) {
  h1 {
    font-size: 3em;
    line-height: 1.3;
  }
}
```

Используя Typi, все, что нужно сделать, это задать новую мапу, содержащую соответствующие значения `font-size` и `line-height` для каждого значения опорной точки. Эта мапа удет работать точно так же как и `$typi`.

```scss
$h1-font-map: (
  null: (2em, 1.2),
  small: (3em, 1.3)
);
```

Как только вы создали мапу, вы можете использовать `typi` миксин для задания `font-size` и `line-height` свойств. Этот миксин требует только один параметр - подготовленную нами мапу:

```scss
h1 {
  @include typi($h1-font-map);
}
```

*Заметка: если вы поменяли оригинальные `$breakpoints` или `$typi` мапы в миксине `typi-base`, вам необходимо будет проделать то же саомое и с `typi` миксином.*

```scss
h1 {
  @include typi(
    $h1-font-map,
    $breakpoints: $some-breakpoint-map
    $typi: $some-typi-map
  );
}
```

Миксин `typi` делает то же самое, что и `typi-base`. Разница лишь в том, что `typi` задает размер шрифта в единицах `rem` вместо процентов. Если вы удивлены использованию таких единиц, то рекомендую вам [эту статью](ссссылка).

После директивы `@include typi($h1-font-map)` CSS на выходе будет такой:

```scss
h1 {
  font-size: 2rem;
  line-height: 1.2;
}

@media all and (min-width: 600px) {
  h1 {
    font-size: 3rem;
    line-height: 1.3;
  }
}
```

Вы можете создавать неограниченное количество мап. Просто используйте их с соответствующим селектором.

```scss
$h1-font-map: (//... );
$h2-font-map: (//... );
$h3-font-map: (//... );
// ...

h1 { @include typi($h1-font-map); }
h2 { @include typi($h2-font-map); }
h3 { @include typi($h3-font-map); }
```

Вот как просто вы можете использовать Typi для задания свойств `font-size` и `line-height` для целого ряда элементов при этом не написав ни одного медиа-запроса вручную.

## Использование Typi для вертикального ритма

Вертикальный ритм это концепт, взятый из печатной типографики. Эта концепция подразумевает, что вертикальные пространства между элементами на странице должны согласоваться между собой.

Это означает, что мы должны руководствоваться следующими двумя правилами:

1. Устанавливайте **вертикальные промежутки между элементами кратными значению базовой линии**.
2. Устанавливайте **`line-height` всех текстовых элементов кратными значению базовой линии**.

*Заметка: просмотрите [эту статью](ссссылка), если вы хотите узнать больше о вертикальном ритме.*

Давайте вычислим значение базовой линии. В данный момент мы используем размер шрифта `16px` и высоту строки со значением `1.4`. Это озночает, что значение базовой линии вычисляется так: `16px * 1.4 = 22.4px`.

Необходимо перевести `22.4px` в относительные единицы, чтобы это помогло нам легче масштабировать типографику. ([Вгляните на этот пост](ссссылка), если вам нужно обоснование.) Лучше всего будет перевести пиксели в `rem`.

Следовательно размер одной базовой линии равер `1.4em`.

Поскольку мы следуем вертикальному ритму, нам нужно использовать значения кратные `1.4em` повсеместно. Так что код приобретает следующий вид:

```scss
.selector {
  margin: 4.2rem; // значение в 3 базовой линии
  padding: 2.8rem; // значение в 2 базовой линии
}
```

Здесь мы вычислили `4.2rem` и `2.8rem` вручную. Это не так уж сложно, когда мы работаем с маленькими проектами. Количество прилагаемых усилий увеличивается в увеличением сложности проекта.

С Typi не нужно делать эти постоянные арифметические действия, потому что она предоставляет нам функцию `vr`, которая получает коэффициент и выдает значение кратное размеру текущей базовой линии.

С этой функцией, код выше приобретает следующий вид:

```scss
.selector {
  margin: vr(3); // значение в 3 базовой линии
  padding: vr(2); // значение в 2 базовой линии
}
```

Намного проще, не правда ли? :)

Есть только одно условие необходимое для использования функции Typi по работе с вертикальным ритмом. Вам необходимо задать значение `line-height` в вашей `$typi` мапе в ключе `null`.

```scss
$typi: (
  null: (16px, 1.4)
);
```

Это все, что касается функции `vr` для арифметики с базовыми линиями.

## Заключение

В этой статье вы узнали, как использовать `typu-base` и `typi` миксины для задания свойств `font-size` и `line-height`. Также вы увидели, как работает функция `vr` в Typi для упрощения арифметики, связанной с вертикальным ритмом.

В Typi есть больше возможностей, но пока это все, что умещается в пределах одной статьи. В следующей я покажу некоторые продвинутые техники использования Typi для облегчения работы с отзывчивой типографикой.
